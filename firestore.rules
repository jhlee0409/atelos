rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // 시나리오 컬렉션 규칙
    match /scenarios/{scenarioId} {
      // 모든 사용자가 활성화된 시나리오 읽기 가능
      allow read: if resource.data.status == 'active' || resource.data.status == 'testing';

      // 쓰기는 서버 사이드에서만 (Admin SDK 또는 서버 환경 변수 인증)
      allow write: if false;
    }

    // 게임 세션 (향후 확장용)
    match /gameSessions/{sessionId} {
      allow read, write: if request.auth != null;
    }
  }
}
